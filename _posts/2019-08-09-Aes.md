---
layout: post
title: "对称加密-Aes"
subtitle: ""
date: 2019-08-08 22:09:00
author: "wantu"
header-img: "img/post-bg-rwd.jpg"
catalog: true
tags:
  - Aes
---

## 前言

最近公司技术负责人宇哥排查到了一个很匪夷所思的事情。部分小程序接口请求某个接口但是响应莫名其妙被置为空。后面排查到是被 TX 给劫持了，具体被劫持的原因，那次请求中有一个 url(指向七牛云上的图片资源)，应该 TX 拿到了那个资源并且识别到了图片上的“京东”这两个字眼，然后就发生了之后的事情。心疼我东哥 1 东(1 东===2min)。后面宇哥就交代了我们这边的接口提供方要求对数据进行加密。我后面被负责处理这个事情。

#### 处理思路

需求：<br>
&nbsp;&#8195;1、对数据进行加密<br>
&nbsp;&#8195;2、加密过程不要太过复杂<br>
&nbsp;&#8195;3、对接口响应时间不会造成太大的影响（避免响应时间大幅度增加）<br>
&nbsp;&#8195;4、灵活配置<br>
来吧。干活了。 <br>
&nbsp;&#8195;1、首先确定加密方向。因为不能太过复杂，所以最好采用对称加密。个人觉得有必要像组合加密机制那样先用非对称加密加密对称加密的密钥（撇开中间人攻击）。<br>
&nbsp;&#8195;2、选中对称加密，对称加密算法选择，Aes 是典型的加密算法。而且 node 核心模块 crypto 也支持。<br>

具体实现：<br>
&nbsp;&#8195;1、打算在服务器端和客户端这边维护一些密钥数组和加密向量数组为的是稍微提高些安全性。<br>
&nbsp;&#8195;2、加密密钥和加密向量的定位值不应该是明文。采用位运算对实际下标值进行某种位运算进行偏移。<br>

**代码**<br>

```javascript
```

困惑：<br>
&nbsp;&#8195;1、加密向量感觉很废。
&nbsp;&#8195;2、加密向量为啥长度有要求，为啥是 16 位？

#### Aes 细细讲来

#### 会头看看
