---
layout:     post
title:      "git相关命令以及好的提交规范"
subtitle:   ""
date:       2018-11-02
author:     "wantu"
header-img: "img/lake.jpg"
catalog: true
tags:
    - git
---
## 前言
&nbsp;&#8195;主要想针对官方文档的知识点做一些整理与记录。后面是一些好的提交规范。
#### Git 基础以及相关原理、思想
Git较之其他版本控制最主要的差别就是它对待数据的方式。其他大部分系统以文件列表变更方式存储信息，而Git更像是把数据看作是对小型文件系统的一组快照。本质来说Git是一个内容寻址文件系统。<br>

Git优势：<br>
1、近乎所有操作都是本地执行<br>
2、Git 保证完整性<br>
3、Git 一般只添加数据<br>


#### 常用命令

* git help 帮助
* git init 现有目录初始化仓库，仅仅只是初始化，项目中的文件未被跟踪
* git clone 克隆代码 ,克隆操作会自动使用默认的master和origin名字
* git checkout 分支切换
* git checkout -b 'xxx' 切出分支xxx

* git branch 查看分支 -b(new branch新建一个分支)
* git status 检查当前文件状态 -s参数状态简览
* git diff 对比本地代码与上次的区别 1、--cache查看已经暂存起来的变化
* git add  跟踪新文件（记得和.gitignore一起食用效果更佳）
* git RESET HEAD 取消暂存的文件（有个git checkout --fileName命令用于撤销对文件的修改但是不推荐使用）
* git log 查看提交历史 1、-p 显示每次提交的差异，后续可跟-n eg:git log -p -2最近两次提交 的差异 2、--graph 显示 ASCII 图形表示的分支合并历史 3、--oneline 4、--reverse
* git commit 提交更新 -a：跳过使用暂存区域【对改动特别自信，又嫌git add .麻烦的，否则还是一步一步来吧】
* git commit --amend 撤消操作
* git push 提交代码 
* git rm 移除文件 1、-f 删除文件之前已经对文件进行改动并且已经放到暂存区，需用-f进行强制删除。2、--cached 仅从跟踪清单中删除，当前工作目录仍会保留相关文件。

* git remote -v 查看远程仓库
* git remote show [remote-name] 查看远程仓库
* git remote add <shortName> <url> 添加远程仓库，同时指定一个简写名 eg:git add want git://github.com/xxx/xx 以后就可以用want代替对应的仓库地址了
* git remote rename [new-name] 远程仓库重新命名(修改某个远程仓库在本地的简称) git remote rename want wantu
* git remote rm [remote-name] 删除远程仓库
* git fetch [remote-name] 从远程仓库拉取本地还没有的数据。执行完成后，你将会拥有那个远程仓库中所有分支的引用，可以随时合并或查看。
* git merge branch-name 合并分支（一般在其他分支合并自己的开发分支，因为一旦出现冲突处理起来比较方便）

* git tag 列出标签
* git tag -a <tag-version> -m <remark-info> 添加附注标签（推荐使用）-a(annotated：注释)
* git tag <tag-version> 添加轻量标签
* git tag -a <tag-version> <校验和或者部分校验和> 后期打标签
* git tag push origin [tagname] 显式的将标签推送到远程服务器
* git tag push origin --tags 一次推送所有本地新增的标签上去
* git config --global alias.ci commit   =>  git commit 可以用git ci替代 同理其他命令

#### 分支
先看一下进行git add . 、git commit -m 'xxx' git在做什么事情。<br>
git add . 操作:git会为每一个文件计算校验和（SHA-1哈希算法）然后会把当前版本的文件快照保存到git仓库（Git使用blob对象来保存他们），最终将校验和加入到暂存区等待提交。<br>
git commit -m 'xx'操作: Git 会先计算每一个子目录（本例中只有项目根目录）的校验和，然后在 Git 仓库中这些校验和保存为树对象。 随后，Git 便会创建一个提交对象，它除了包含上面提到的那些信息外，还包含指向这个树对象（项目根目录）的指针。如此一来，Git 就可以在需要的时候重现此次保存的快照。<br>

此时Git仓库中有n+2个对象：n个 blob 对象（保存着文件快照）、一个树对象（记录着目录结构和 blob 对象索引）以及一个提交对象（包含着指向前述树对象的指针和所有提交信息）。<br>
![x](/img/git分支.png)
第一次提交的提交对象较之之后的提交对象缺少一个指向上次提交对象（父对象）的指针。<br>

分支的创建也只是创建了一个可以移动的新指针，通过HEAD这个特殊的指针Git知晓当前是处于那个分支上面。<br>
关于HEAD指针的解释：在 Git 中，它是一个指针，指向当前所在的本地分支（译注：将 HEAD 想象为当前分支的别名）。<br>
分支切换就是将HEAD指针的指向切换一下。但是git checkout branch-1 这个命令做了两件事。 一是使 HEAD 指回 master 分支，二是将工作目录恢复成 master 分支所指向的快照内容。<br>

#### 提交规范
&nbsp;&#8195;建议小步提交，防止一次修改过多文件，导致后期维护、撤销等困难。<br>

**工作**<br>
&nbsp;&#8195;如果是使用jira作为看板工具，那么提交的时候最好将jira的任务卡号信息携带进去。<br>
```
[任务卡号] 老王 & 老李: do something
```

**常规**
```
[任务分类] 修改模块/组件：修改内容
任务分类：
1、功能新增
2、功能完善
3、bug修复
4、文档补充
```

