I"öQ<h2 id="å‰è¨€">å‰è¨€</h2>
<p>Â â€ƒç¨‹åºå‘˜ææ€•å¾ˆå¤šéƒ½æ˜¯ä¸æƒ³å†™æ–‡æ¡£çš„ï¼Œä½†æ˜¯ä¸€æ—¦æ¥æ‰‹ä»–äººçš„é¡¹ç›®åˆæ˜¯ç¬¬ä¸€æ—¶é—´è¯´ï¼šæ–‡æ¡£å‘¢ï¼Ÿè¿™ç¡®å®æ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„ç°è±¡ã€‚å…¶æœ¬è´¨ååº”çš„å°±æ˜¯ä¹¦å†™æ–‡æ¡£æ¯”è¾ƒè€—æ—¶ï¼ŒæŠ€æœ¯äººå‘˜ä¸æƒ³åšè¿™ç§â€œæ— ç”¨åŠŸâ€ä¸æ¥æ‰‹ä»–äººçš„é¡¹ç›®ï¼ŒæŠ€æœ¯äººå‘˜åˆä¸æƒ³çœ‹åˆ«äººçš„ä»£ç ï¼Œæƒ³é€šè¿‡é˜…è¯»ç›¸å…³çš„æ–‡æ¡£åŠ å¿«ä¸Šæ‰‹é€Ÿåº¦ä¹‹é—´çš„çŸ›ç›¾ã€‚<br />
Â â€ƒä¸ªäººè§‚ç‚¹ï¼šå¥½çš„è§„èŒƒä¸€å®šè¦å°½æ—©å…»æˆã€‚ä¸ªäººåœ¨åˆšåˆšå‚åŠ å·¥ä½œçš„æ—¶å€™ä¸€å¼€å§‹çš„åšæ³•æ˜¯åœ¨serviceå±‚ä¸Šå†™å¥½æ¥å£æ³¨é‡Šï¼Œåœ¨æ³¨é‡Šä¸­å°†ç›¸å…³çš„æ¥å£çš„åŠŸèƒ½ã€è¯·æ±‚å‚æ•°ã€å“åº”è¿›è¡Œæè¿°ã€‚åˆ°åæ¥é‡‡ç”¨Rapè¿›è¡Œæ–‡æ¡£ç®¡ç†ï¼ŒRapç®¡ç†çš„å¥½å¤„å°±æ˜¯ç®€å•ã€å¿«é€Ÿã€‚ç›¸å…³çš„å‚æ•°åƒå¡«è¡¨ä¸€æ ·çš„å¡«å¥½ï¼Œæ¯”è¾ƒç®€å•æ— è„‘ã€‚ä½†æ˜¯Rapå­˜åœ¨å¾ˆå¤šä¸è¶³ä¹‹å¤„ï¼šæ¯”å¦‚è¯´å¤šäººåŒæ—¶ç¼–è¾‘å­˜åœ¨äº’æ–¥ç°è±¡ï¼Œå•ä¸€æ–‡æ¡£åŒä¸€æ—¶é—´åªå…è®¸ä¸€ä¸ªç”¨æˆ·ç¼–è¾‘ï¼Œäº¦æˆ–æ˜¯æ¥å£ä¸æ”¯æŒåœ¨çº¿çš„è¯·æ±‚æµ‹è¯•ï¼ˆå¯èƒ½è‡ªå·±ä¸çŸ¥é“ï¼‰ç­‰ã€‚è€Œä¸”RapæœåŠ¡å™¨ï¼ˆç§æœéƒ¨ç½²æƒ…å†µé™¤å¤–ï¼‰æ˜¯å¤–éƒ¨çš„ï¼Œç›¸å…³çš„å®‰å…¨æ€§å¯èƒ½ä¸æ˜¯å¾ˆé å¾—ä½ã€‚ä¸ªäººä¹Ÿæ²¡æœ‰æ­å»ºè¿‡å…¬å¸è‡ªç”¨çš„rapã€‚æ‰€ä»¥ç›¸å…³çš„å¤æ‚åº¦ä¸æ˜¯å¾ˆæ¸…æ¥šã€‚ä½†æ˜¯ä»Šå¤©ï¼Œæˆ‘æƒ³å‘ä½ æ¨èçš„è¿™ä¸ªä¸œè¥¿ç¡®å®å¯¹äºæ­å»ºä¸€ä¸ªè‡ªç”¨çš„æ–‡æ¡£ç®¡ç†ç³»ç»Ÿæ˜¯å¾ˆæ–¹ä¾¿ã€é«˜æ•ˆçš„ã€‚<br />
Â â€ƒå®ƒå°±æ˜¯Swaggerã€‚</p>

<h2 id="æ­£æ–‡">æ­£æ–‡</h2>
<h4 id="what">what?</h4>
<p>Â â€ƒç»´åŸºç™¾ç§‘:Swaggeræ˜¯ä¸€ä¸ªå¼€æºè½¯ä»¶æ¡†æ¶ï¼Œç”±å¤§å‹å·¥å…·ç”Ÿæ€ç³»ç»Ÿæ”¯æŒï¼Œå¯å¸®åŠ©å¼€å‘äººå‘˜è®¾è®¡ï¼Œæ„å»ºï¼Œè®°å½•å’Œä½¿ç”¨RESTful WebæœåŠ¡ã€‚ è™½ç„¶å¤§å¤šæ•°ç”¨æˆ·é€šè¿‡Swagger UIå·¥å…·è¯†åˆ«Swaggerï¼Œä½†Swaggerå·¥å…·é›†åŒ…æ‹¬å¯¹è‡ªåŠ¨åŒ–æ–‡æ¡£ï¼Œä»£ç ç”Ÿæˆå’Œæµ‹è¯•ç”¨ä¾‹ç”Ÿæˆçš„æ”¯æŒã€‚<br />
Â â€ƒå…¶æœ‰ä¸‰å¤§å·¥å…·ï¼šswagger-uiã€swagger-editorã€swagger-codegenã€‚swagger-uiæ˜¯ç”¨æ¥æ˜¾ç¤ºAPIæ–‡æ¡£çš„ï¼Œå¹¶ä¸”å®ƒè¿˜æ”¯æŒç¼–è¾‘å’Œåœ¨çº¿çš„è¯·æ±‚æµ‹è¯•ã€‚
swagger-editoræ˜¯ä¸€ä¸ªåœ¨çº¿çš„æ–‡æ¡£ç¼–è¾‘æ–‡ä»¶å·¥å…·ï¼Œæœ‰åŠ©äºæ•´ä¸ªæ¡†æ¶ä¸­å…¶ä»–å·¥å…·çš„ä½¿ç”¨ï¼Œå·¦è¾¹ç¼–è¾‘å³è¾¹æ˜¾ç¤ºã€‚swagger-codegen,å¯ä»¥æ ¹æ®swagger.jsonæˆ–è€…swagger.ymlæ–‡ä»¶ç”ŸæˆæŒ‡å®šçš„è®¡ç®—æœºè¯­è¨€æŒ‡å®šæ¡†æ¶çš„ä»£ç ã€‚</p>

<h4 id="æ­å»ºè¿‡ç¨‹">æ­å»ºè¿‡ç¨‹</h4>
<p>1ã€æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œæ‰§è¡Œ npm initåˆå§‹åŒ–package.jsonã€‚<br />
2ã€è¿è¡Œnpm install swagger -g â€“save-devå®‰è£…SwaggeråŒ…ã€‚<br />
3ã€åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªapi/swagger/swagger.yamlã€‚å¹¶å°†ä¸€ä¸‹éƒ¨åˆ†å¤åˆ¶è¿›æ¥ã€‚<br /></p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
</pre></td><td class="rouge-code"><pre><span class="na">swagger</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2.0"</span>
<span class="na">info</span><span class="pi">:</span>
 <span class="na">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">1.0.0"</span>
 <span class="na">title</span><span class="pi">:</span> <span class="s2">"</span><span class="s">xxxåå°API"</span>
 <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">æ¥å£æ–‡æ¡£è¯´æ˜ä»¥åŠæµ‹è¯•"</span>
 <span class="na">contact</span><span class="pi">:</span>
   <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">want"</span>
   <span class="na">email</span><span class="pi">:</span> <span class="s2">"</span><span class="s">beursuperman@163.com"</span> 
<span class="na">host</span><span class="pi">:</span> <span class="s2">"</span><span class="s">localhost:5500"</span>
<span class="na">schemes</span><span class="pi">:</span>
 <span class="pi">-</span> <span class="s2">"</span><span class="s">http"</span>
<span class="na">consumes</span><span class="pi">:</span>
 <span class="pi">-</span> <span class="s2">"</span><span class="s">application/json"</span>
<span class="na">produces</span><span class="pi">:</span>
 <span class="pi">-</span> <span class="s2">"</span><span class="s">application/json"</span>
<span class="na">paths</span><span class="pi">:</span>
  <span class="na">/api/v1/queryAllGroupMemberChatRecordByChatroomId</span><span class="pi">:</span>
    <span class="na">post</span><span class="pi">:</span>
      <span class="na">summary</span><span class="pi">:</span> <span class="s">æŸ¥è¯¢ç¾¤ç»„æ‰€æœ‰èŠ‚ç‚¹ä¹‹é—´çš„èŠå¤©è®°å½•.</span>
      <span class="na">consumes</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">application/json</span>
      <span class="na">parameters</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">in</span><span class="pi">:</span> <span class="s">body</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">param</span>
          <span class="na">description</span><span class="pi">:</span> <span class="s">è¯·æ±‚ä½“å¯¹è±¡</span>
          <span class="na">required</span><span class="pi">:</span> <span class="no">true</span>
          <span class="na">schema</span><span class="pi">:</span>
            <span class="na">$ref</span><span class="pi">:</span> <span class="s2">"</span><span class="s">#/definitions/queryAllGroupMemberChatRecordByChatroomIdReq"</span>
      <span class="na">responses</span><span class="pi">:</span>
        <span class="na">200</span><span class="pi">:</span>
          <span class="na">description</span><span class="pi">:</span> <span class="s">A responsed object</span>      
<span class="na">definitions</span><span class="pi">:</span>
  <span class="na">queryAllGroupMemberChatRecordByChatroomIdReq</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
    <span class="na">required</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">scroll</span>
      <span class="pi">-</span> <span class="s">chatRoomId</span>
      <span class="pi">-</span> <span class="s">size</span>
      <span class="pi">-</span> <span class="s">sort</span>
      <span class="pi">-</span> <span class="s">index</span>
    <span class="na">properties</span><span class="pi">:</span>
      <span class="na">scroll</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
        <span class="na">example</span><span class="pi">:</span> <span class="s1">'</span><span class="s">5m'</span>
      <span class="na">size</span><span class="pi">:</span> 
        <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
        <span class="na">example</span><span class="pi">:</span> <span class="m">20</span>
      <span class="na">sort</span><span class="pi">:</span> 
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
        <span class="na">example</span><span class="pi">:</span> <span class="s1">'</span><span class="s">desc'</span>
      <span class="na">chatRoomId</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
        <span class="na">example</span><span class="pi">:</span> <span class="s1">'</span><span class="s">8477243337@chatroom'</span>
      <span class="na">index</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
        <span class="na">example</span><span class="pi">:</span> <span class="s1">'</span><span class="s">chat'</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>4ã€è¿è¡ŒSwagger project editï¼Œæ­¤æ—¶ä¼šè‡ªåŠ¨æ‰“å¼€ä¸€ä¸ªswaggerç¼–è¾‘çª—å£ï¼Œè¯»å–çš„å†…å®¹å°±æ˜¯ä¸Šä¸€æ­¥ä¸­çš„yamlæ–‡ä»¶<br />
5ã€å°è¯•ä¿®æ”¹ç¼–è¾‘çª—å£çš„å†…å®¹ï¼Œæ­¤æ—¶å³ä¾§ä¼šåŠæ—¶ä¿®æ”¹æ›´æ–°ï¼Œè€Œä¸”api/swagger/swagger.yamlä¹Ÿä¼šè·Ÿç€è‡ªåŠ¨æ›´æ–°<br />
6ã€ä¸‹è½½Swagger-uiï¼Œæ‹·è´distæ–‡ä»¶å¤¹ä¸­çš„ä»£ç åˆ°æ ¹ç›®å½•ä¸‹æ–°å»ºçš„publicæ–‡ä»¶å¤¹<br />
7ã€åˆ›å»ºä¸€ä¸ªexpressé¡¹ç›®ï¼Œåœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºindex.jsã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="c1">//å…ˆæ‰§è¡Œä¸€ä¸‹npm install</span>
<span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span> 
<span class="kd">var</span> <span class="nx">opn</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">opn</span><span class="dl">'</span><span class="p">);</span> 

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> 
  <span class="nx">opn</span><span class="p">(</span><span class="dl">'</span><span class="s1">http://localhost:3000/api-doc</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">App listening on port 3000!</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="dl">'</span><span class="s1">/api-doc</span><span class="dl">'</span><span class="p">,</span> <span class="nx">express</span><span class="p">.</span><span class="kd">static</span><span class="p">(</span><span class="dl">'</span><span class="s1">public</span><span class="dl">'</span><span class="p">));</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>8ã€è¿è¡Œnode index.jsä¼šå¯ç”¨swagger-uiåŠŸèƒ½ï¼Œè‡ªåŠ¨æ‰“å¼€apiå±•ç¤ºé¡µé¢ï¼Œä½†æ˜¯é¡µé¢æ˜¯é»˜è®¤çš„å®˜ç½‘ä¸Šçš„ä¸œè¥¿ï¼›<br />
9ã€å°†api/swaggeræ–‡ä»¶å¤¹ä¸‹çš„/swagger.yamlæ–‡ä»¶å¤åˆ¶åˆ°publicæ–‡ä»¶å¤¹ä¸‹ï¼Œæ‰“å¼€public/index.htmlï¼Œåœ¨è„šæœ¬ä¸­ä¿®æ”¹urlä¸ºâ€™./swagger.yamlâ€™,åˆ·æ–°æµè§ˆå™¨ï¼Œå³å¯çœ‹åˆ°æˆ‘ä»¬çš„å†…å®¹<br />
10ã€å¦‚ä½•å°†swagger-editoræ–‡ä»¶çš„å˜åŒ–å®æ—¶åé¦ˆåˆ°swagger-uiä¸Šï¼Œè¿è¡Œnpm install gulp -g â€“save-devå®‰è£…gulpåŒ…ï¼Œåœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºgulpfile.jsï¼Œä»£ç å¦‚ä¸‹(è®°å¾—å…ˆå®‰è£…å¥½ä¾èµ–)ï¼š<br /></p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">gulp</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">gulp</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">yaml</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">js-yaml</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">path</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">fs</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// å»ºç«‹api/swaggerçš„swagger.yamlåˆ°publicä¸‹çš„swagger.yamlè”ç³»</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="dl">'</span><span class="s1">swagger</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">doc</span> <span class="o">=</span> <span class="nx">yaml</span><span class="p">.</span><span class="nx">safeLoad</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="dl">'</span><span class="s1">./api/swagger/swagger.yaml</span><span class="dl">'</span><span class="p">)));</span> 
    <span class="nx">fs</span><span class="p">.</span><span class="nx">writeFile</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="dl">'</span><span class="s1">./public/swagger.yaml</span><span class="dl">'</span><span class="p">),</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">doc</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="dl">'</span><span class="s1"> </span><span class="dl">'</span><span class="p">));</span>
<span class="p">});</span>

<span class="c1">// å®æ—¶æ›´æ–°</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="dl">'</span><span class="s1">default</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">gulp</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span><span class="dl">'</span><span class="s1">./api/swagger/swagger.yaml</span><span class="dl">'</span><span class="p">,[</span><span class="dl">'</span><span class="s1">swagger</span><span class="dl">'</span><span class="p">]);</span>
<span class="p">})</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>11ã€å†çœ‹ä¸‹package.jsonä¸­çš„å†…å®¹ï¼š</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"doc-api"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"main"</span><span class="p">:</span><span class="w"> </span><span class="s2">"index.js"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"node index.js"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"swg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"swagger project edit"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"gulp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gulp"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"author"</span><span class="p">:</span><span class="w"> </span><span class="s2">"want"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"license"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ISC"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"devDependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"express"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^4.15.2"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"swagger"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.7.5"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"gulp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.9.1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"js-yaml"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.8.3"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"opn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5.0.0"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"dependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"cors"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^2.8.5"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>
<p>12ã€æ–°å¢readme.mdæ·»åŠ ä½¿ç”¨è¯´æ˜ï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>&gt; é¡»çŸ¥
* npm start å¯åŠ¨é¡¹ç›®å¹¶è·³è½¬æ¥å£å±•ç¤ºé¡µé¢ 
* swagger project edit æ¥å£æ–‡æ¡£åœ¨çº¿ç¼–è¾‘
* npm run gulp å¼€å§‹åŒæ­¥ç¼–è¾‘ ï¼ˆé¡¹ç›®ä¸€å¼€å§‹å°±è¦æ‰§è¡Œçš„å‘½ä»¤,å› ä¸ºè¦å®æ—¶ç›‘æ§api/swagger/swagger.yamlçš„ç¼–è¾‘å˜åŠ¨ï¼‰
</pre></td></tr></tbody></table></code></pre></div></div>
<h4 id="æ•ˆæœå›¾">æ•ˆæœå›¾</h4>
<p><strong>APIç¼–å°±é¡µé¢</strong>
<img src="/img/swagger-editor.jpg" alt="ç¼–è¾‘é¡µé¢" />
<strong>APIå±•ç¤ºé¡µé¢</strong>
<img src="/img/swagger-ui.jpg" alt="å±•ç¤ºé¡µé¢" />
<strong>APIåœ¨çº¿æµ‹è¯•é¡µé¢</strong>
<img src="/img/swagger-test.jpg" alt="æµ‹è¯•é¡µé¢" />
<strong>APIåœ¨çº¿æµ‹è¯•å“åº”</strong>
<img src="/img/swagger-result.jpg" alt="æµ‹è¯•é¡µé¢" /></p>

<h4 id="æœŸé—´é‡åˆ°çš„é—®é¢˜">æœŸé—´é‡åˆ°çš„é—®é¢˜ï¼š</h4>
<p>1ã€è·¨åŸŸé—®é¢˜ã€‚è¿™ä¸ªé—®é¢˜å‘ç”Ÿåœ¨swagger-uiä¸­è¿›è¡Œæ¥å£æµ‹è¯•çš„æ—¶å€™ã€‚å‡ºç°è¿™ä¸ªé—®é¢˜,è°·æ­Œå¹¶è¯¢é—®äº†å®å“¥,ç¡®è®¤æ˜¯è·¨åŸŸå¯¼è‡´çš„ï¼Œæ‰€ä»¥è®¾ç½®ç›¸å…³çš„è·¨åŸŸè®¿é—®è¿›è¡Œè§£å†³ã€‚ä½†æ˜¯é€šè¿‡æŸ¥çœ‹Networkå‘ç°åˆä¸€ä¸ªOPTIONè¯·æ±‚æ¯æ¬¡404ï¼Ÿ<br />
<img src="/img/cors.jpg" alt="æŠ¥é”™" />
é¢„æ£€(OPTION)è¯·æ±‚äº§ç”Ÿçš„å¤§æ¦‚ç‡åŸå› ï¼š<br /></p>
<ol>
  <li>Getã€Headã€Postæ–¹æ³•ä»¥å¤–çš„è¯·æ±‚æ–¹æ³•</li>
  <li>å¦‚æœæ˜¯POSTè¯·æ±‚,Content-Typeå–è¿™ä¸‰ä¸ªå€¼ä»¥å¤–çš„å€¼ï¼š
    <ul>
      <li>application/x-www-form-urlencoded</li>
      <li>multipart/form-data</li>
      <li>text/plain
é‚£ä¹ˆå¾ˆæ˜æ˜¾ï¼Œconsumesçš„å€¼ä¸ºapplication/jsonè‚¯å®šæ˜¯è¦å‘é€é¢„æ£€è¯·æ±‚(OPTION)çš„ã€‚é‚£ä¹ˆå¦‚ä½•å¤„ç†ã€‚æˆ‘æš‚æ—¶çš„åšæ³•æ˜¯åœ¨é¡¹ç›®ä¸­æ”¾æ‰OPTIONè¯·æ±‚ï¼Œä¸€æ—¦é¢„æ£€è¯·æ±‚æ²¡æœ‰å“åº”é‚£ä¹ˆåç»­çš„è¯·æ±‚æ˜¯ä¸ä¼šå‘é€çš„ã€‚
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre>app.use (req, res, next)-&gt;
res.header("Access-Control-Allow-Origin", "*");
res.header("Access-Control-Allow-Methods", "PUT, GET, POST, DELETE, OPTIONS");
res.header("Access-Control-Allow-Headers", "Origin, X-Requested-With, Content-Type, Accept, Authorization, Access-Control-Allow-Credentials");
res.header("Access-Control-Allow-Credentials", "true");
if req.method == 'OPTIONS'
 res.send(200)
else 
 next()
</pre></td></tr></tbody></table></code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ol>

<p>2ã€yamlè¯­æ³•
æ³¨æ„æˆ‘è¿™ä¹¦å†™çš„æ ¼å¼OAS2çš„æ ¼å¼ã€‚åˆ«æŠŠOAS3çš„æ ¼å¼å°±å¾€ä¸Šå†™ã€‚ç›¸å…³çš„è¯­æ³•ä¹¦å†™å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚
<a href="https://swagger.io/docs/specification/describing-request-body/">å®˜æ–¹æ–‡æ¡£</a></p>

<p>æ­å»ºå‚è€ƒï¼š<a href="https://zhuanlan.zhihu.com/p/26741562">å¿…è‡³</a></p>
:ET